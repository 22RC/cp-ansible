# Maintained by Ansible
advertised.listeners=INTERNAL://ip-172-31-46-201.us-west-2.compute.internal:9092,\
                     BROKER://ip-172-31-46-201.us-west-2.compute.internal:9091,\
                     EXTERNAL://ec2-54-202-79-143.us-west-2.compute.amazonaws.com:9093,\
                     TOKEN://ec2-54-202-79-143.us-west-2.compute.amazonaws.com:9094
authorizer.class.name=io.confluent.kafka.security.authorizer.ConfluentServerAuthorizer
broker.id=1
broker.rack=cluster1
confluent.authorizer.access.rule.providers=CONFLUENT,ZK_ACL
confluent.license.topic.replication.factor=3
confluent.metadata.server.advertised.listeners=https://ec2-54-202-79-143.us-west-2.compute.amazonaws.com:8090,\
                                               http://ec2-54-202-79-143.us-west-2.compute.amazonaws.com:8091
confluent.metadata.server.authentication.method=BEARER
confluent.metadata.server.listeners=https://0.0.0.0:8090,http://0.0.0.0:8091
confluent.metadata.server.openapi.enable=True
confluent.metadata.server.public.key.path=/var/ssl/private/public.pem
confluent.metadata.server.ssl.key.password=confluent
confluent.metadata.server.ssl.keystore.location=/var/ssl/private/kafka_broker.keystore.jks
confluent.metadata.server.ssl.keystore.password=confluent
confluent.metadata.server.ssl.truststore.location=/var/ssl/private/kafka_broker.truststore.jks
confluent.metadata.server.ssl.truststore.password=confluent
confluent.metadata.server.token.auth.enable=true
confluent.metadata.server.token.key.path=/var/ssl/private/tokenKeypair.pem
confluent.metadata.server.token.max.lifetime.ms=3600000
confluent.metadata.server.token.signature.algorithm=RS256
confluent.metadata.topic.replication.factor=3
confluent.metrics.reporter.bootstrap.servers=ip-172-31-46-201.us-west-2.compute.internal:9091,\
                                             ip-172-31-36-101.us-west-2.compute.internal:9091,\
                                             ip-172-31-32-142.us-west-2.compute.internal:9091,\
                                             ip-172-31-42-78.us-west-2.compute.internal:9091,\
                                             ip-172-31-39-178.us-west-2.compute.internal:9091
confluent.metrics.reporter.sasl.jaas.config=com.sun.security.auth.module.Krb5LoginModule required \
    useKeyTab=true \
    storeKey=true \
    keyTab="/etc/security/keytabs/kafka_broker.keytab" \
    principal="kafka/ip-172-31-46-201.us-west-2.compute.internal@QE.CONFLUENT.IO";
confluent.metrics.reporter.sasl.kerberos.service.name=kafka
confluent.metrics.reporter.sasl.mechanism=GSSAPI
confluent.metrics.reporter.security.protocol=SASL_SSL
confluent.metrics.reporter.ssl.key.password=confluent
confluent.metrics.reporter.ssl.keystore.location=/var/ssl/private/kafka_broker.keystore.jks
confluent.metrics.reporter.ssl.keystore.password=confluent
confluent.metrics.reporter.ssl.truststore.location=/var/ssl/private/kafka_broker.truststore.jks
confluent.metrics.reporter.ssl.truststore.password=confluent
confluent.metrics.reporter.topic.replicas=3

confluent.schema.registry.ssl.key.password=confluent
confluent.schema.registry.ssl.keystore.location=/var/ssl/private/kafka_broker.keystore.jks
confluent.schema.registry.ssl.keystore.password=confluent
confluent.schema.registry.ssl.truststore.location=/var/ssl/private/kafka_broker.truststore.jks
confluent.schema.registry.ssl.truststore.password=confluent
confluent.schema.registry.url=https://ip-172-31-38-68.us-west-2.compute.internal:8081,\
https://ip-172-31-45-132.us-west-2.compute.internal:8081
# confluent.security.event.logger.enable=True
# confluent.security.event.logger.exporter.kafka.topic.replicas=3
# confluent.security.event.router.config={"destinations":{"topics":{"confluent-audit-log-events":{"retention_ms":7776000000}}},\
#   "default_topics":{"allowed":"confluent-audit-log-events","denied":"confluent-audit-log-events"},\
#   "excluded_principals":[],\
#   "routes":\
#   {"crn:///kafka=*/topic=*":\
#       {"produce":{"allowed":"","denied":"confluent-audit-log-events"},\
#         "consume":{"allowed":"","denied":"confluent-audit-log-events"},\
#         "describe":{"allowed":"","denied":"confluent-audit-log-events"}}}}
confluent.support.customer.id=anonymous
confluent.support.metrics.enable=true
group.initial.rebalance.delay.ms=3000
inter.broker.listener.name=BROKER
ldap.com.sun.jndi.ldap.read.timeout=3000
ldap.group.member.attribute.pattern=CN=(.*),CN=Users,DC=qe,DC=confluent,DC=io
ldap.group.name.attribute=sAMAccountName
ldap.group.object.class=group
ldap.group.search.base=CN=Users,DC=qe,DC=confluent,DC=io
ldap.java.naming.factory.initial=com.sun.jndi.ldap.LdapCtxFactory
ldap.java.naming.provider.url=ldap://ec2-34-220-216-219.us-west-2.compute.amazonaws.com:389
ldap.java.naming.security.authentication=simple
ldap.java.naming.security.credentials=Confluent1!
ldap.java.naming.security.principal=CN=mds,CN=Users,DC=qe,DC=confluent,DC=io
ldap.user.memberof.attribute.pattern=CN=(.*),CN=Users,DC=qe,DC=confluent,DC=io
ldap.user.name.attribute=sAMAccountName
ldap.user.search.base=CN=Users,DC=qe,DC=confluent,DC=io
listener.name.broker.gssapi.sasl.jaas.config=com.sun.security.auth.module.Krb5LoginModule required \
    useKeyTab=true \
    storeKey=true \
    keyTab="/etc/security/keytabs/kafka_broker.keytab" \
    principal="kafka/ip-172-31-46-201.us-west-2.compute.internal@QE.CONFLUENT.IO";
listener.name.broker.sasl.enabled.mechanisms=GSSAPI
listener.name.broker.ssl.client.auth=required
listener.name.broker.ssl.key.password=confluent
listener.name.broker.ssl.keystore.location=/var/ssl/private/kafka_broker.keystore.jks
listener.name.broker.ssl.keystore.password=confluent
listener.name.broker.ssl.truststore.location=/var/ssl/private/kafka_broker.truststore.jks
listener.name.broker.ssl.truststore.password=confluent
listener.name.external.gssapi.sasl.jaas.config=com.sun.security.auth.module.Krb5LoginModule required \
    useKeyTab=true \
    storeKey=true \
    keyTab="/etc/security/keytabs/kafka_broker.keytab" \
    principal="kafka/ip-172-31-46-201.us-west-2.compute.internal@QE.CONFLUENT.IO";
listener.name.external.sasl.enabled.mechanisms=GSSAPI
listener.name.external.ssl.client.auth=required
listener.name.external.ssl.key.password=confluent
listener.name.external.ssl.keystore.location=/var/ssl/private/kafka_broker.keystore.jks
listener.name.external.ssl.keystore.password=confluent
listener.name.external.ssl.truststore.location=/var/ssl/private/kafka_broker.truststore.jks
listener.name.external.ssl.truststore.password=confluent
listener.name.internal.oauthbearer.sasl.jaas.config=org.apache.kafka.common.security.oauthbearer.OAuthBearerLoginModule required publicKeyPath="/var/ssl/private/public.pem";
listener.name.internal.oauthbearer.sasl.login.callback.handler.class=io.confluent.kafka.server.plugins.auth.token.TokenBearerServerLoginCallbackHandler
listener.name.internal.oauthbearer.sasl.server.callback.handler.class=io.confluent.kafka.server.plugins.auth.token.TokenBearerValidatorCallbackHandler
listener.name.internal.sasl.enabled.mechanisms=OAUTHBEARER
listener.name.internal.ssl.client.auth=required
listener.name.internal.ssl.key.password=confluent
listener.name.internal.ssl.keystore.location=/var/ssl/private/kafka_broker.keystore.jks
listener.name.internal.ssl.keystore.password=confluent
listener.name.internal.ssl.truststore.location=/var/ssl/private/kafka_broker.truststore.jks
listener.name.internal.ssl.truststore.password=confluent
listener.name.token.oauthbearer.sasl.jaas.config=org.apache.kafka.common.security.oauthbearer.OAuthBearerLoginModule required publicKeyPath="/var/ssl/private/public.pem";
listener.name.token.oauthbearer.sasl.login.callback.handler.class=io.confluent.kafka.server.plugins.auth.token.TokenBearerServerLoginCallbackHandler
listener.name.token.oauthbearer.sasl.server.callback.handler.class=io.confluent.kafka.server.plugins.auth.token.TokenBearerValidatorCallbackHandler
listener.name.token.sasl.enabled.mechanisms=OAUTHBEARER
listener.name.token.ssl.client.auth=required
listener.name.token.ssl.key.password=confluent
listener.name.token.ssl.keystore.location=/var/ssl/private/kafka_broker.keystore.jks
listener.name.token.ssl.keystore.password=confluent
listener.name.token.ssl.truststore.location=/var/ssl/private/kafka_broker.truststore.jks
listener.name.token.ssl.truststore.password=confluent
listener.security.protocol.map=INTERNAL:SASL_SSL,BROKER:SASL_SSL,EXTERNAL:SASL_SSL,TOKEN:SASL_SSL
listeners=INTERNAL://:9092,BROKER://:9091,EXTERNAL://:9093,TOKEN://:9094
log.dirs=/var/lib/kafka/data
log.retention.check.interval.ms=300000
log.retention.hours=168
log.segment.bytes=1073741824
num.io.threads=16
num.network.threads=16
num.partitions=1
num.recovery.threads.per.data.dir=2
offsets.topic.replication.factor=3
sasl.enabled.mechanisms=OAUTHBEARER,GSSAPI
sasl.kerberos.service.name=kafka
sasl.mechanism.inter.broker.protocol=GSSAPI
socket.receive.buffer.bytes=102400
socket.request.max.bytes=104857600
socket.send.buffer.bytes=102400
super.users=User:rbac1-admin;User:kafka
transaction.state.log.min.isr=2
transaction.state.log.replication.factor=3
zookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty
zookeeper.connect=ip-172-31-46-201.us-west-2.compute.internal:2182,\
                  ip-172-31-36-101.us-west-2.compute.internal:2182,\
                  ip-172-31-32-142.us-west-2.compute.internal:2182,\
                  ip-172-31-42-78.us-west-2.compute.internal:2182,\
                  ip-172-31-39-178.us-west-2.compute.internal:2182
zookeeper.connection.timeout.ms=18000
zookeeper.set.acl=true
zookeeper.ssl.client.enable=true
zookeeper.ssl.keystore.location=/var/ssl/private/kafka_broker.keystore.jks
zookeeper.ssl.keystore.password=confluent
zookeeper.ssl.truststore.location=/var/ssl/private/kafka_broker.truststore.jks
zookeeper.ssl.truststore.password=confluent

#Telemetry setup created by RK
confluent.telemetry.enabled=true
confluent.telemetry.api.key=ZRMUI7ZJ4K2BFYIH
confluent.telemetry.api.secret=MxwVKeFYbPCVOVjN2GSGWIlQUsrtK3UCmYw6QkX/8K4zbe/Uo9dTFAjPA56xEAJb
confluent.telemetry.exporter._confluent.client.base.url= https://stag-sandbox-collector.telemetry.aws.confluent.cloud
metric.reporters=io.confluent.telemetry.reporter.TelemetryReporter,io.confluent.metrics.reporter.ConfluentMetricsReporter
confluent.telemetry.exporter.http.type=http
confluent.telemetry.exporter.http.enabled=true

#Setup for Tier Storage Added by RK
confluent.tier.backend=S3
confluent.tier.enable=true
confluent.tier.feature=true
confluent.tier.s3.cred.file.path=/etc/kafka/cred
confluent.tier.s3.bucket=confluent-qe-soak-cluster-tier-storage
confluent.tier.s3.region=us-east-2

# Add ERP security configs
# things have changed since build 146 and explicit configuration of kafka rest seems to be required now
# I liked it better when we didn't have to configure all this :(
kafka.rest.kafka.rest.resource.extension.class=io.confluent.kafkarest.security.KafkaRestSecurityResourceExtension
kafka.rest.public.key.path=/var/ssl/private/public.pem
kafka.rest.rest.servlet.initializor.classes=io.confluent.common.security.jetty.initializer.InstallBearerOrBasicSecurityHandler

kafka.rest.bootstrap.servers=ip-172-31-46-201.us-west-2.compute.internal:9092,\
                             ip-172-31-36-101.us-west-2.compute.internal:9092,\
                             ip-172-31-32-142.us-west-2.compute.internal:9092,\
                             ip-172-31-42-78.us-west-2.compute.internal:9092,\
                             ip-172-31-39-178.us-west-2.compute.internal:9092

kafka.rest.client.security.protocol=SASL_SSL
kafka.rest.client.ssl.key.password=confluent
kafka.rest.client.ssl.keystore.location=/var/ssl/private/kafka_broker.keystore.jks
kafka.rest.client.ssl.keystore.password=confluent
kafka.rest.client.ssl.truststore.location=/var/ssl/private/kafka_broker.truststore.jks
kafka.rest.client.ssl.truststore.password=confluent
kafka.rest.client.confluent.metadata.server.urls.max.age.ms=60000

kafka.rest.confluent.metadata.basic.auth.user.info=rbac1-erp:Confluent1!
kafka.rest.confluent.metadata.bootstrap.server.urls=https://ip-172-31-46-201.us-west-2.compute.internal:8090,\
                                                    https://ip-172-31-36-101.us-west-2.compute.internal:8090,\
                                                    https://ip-172-31-32-142.us-west-2.compute.internal:8090,\
                                                    https://ip-172-31-42-78.us-west-2.compute.internal:8090,\
                                                    https://ip-172-31-39-178.us-west-2.compute.internal:8090
kafka.rest.confluent.metadata.http.auth.credentials.provider=BASIC
kafka.rest.confluent.metadata.server.urls.max.age.ms=60000
kafka.rest.confluent.metadata.ssl.key.password=confluent
kafka.rest.confluent.metadata.ssl.keystore.location=/var/ssl/private/kafka_broker.keystore.jks
kafka.rest.confluent.metadata.ssl.keystore.password=confluent
kafka.rest.confluent.metadata.ssl.truststore.location=/var/ssl/private/kafka_broker.truststore.jks
kafka.rest.confluent.metadata.ssl.truststore.password=confluent
confluent.license=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJTdGFuIiwiZXhwIjoxNjM3MTkzNjAwLCJpYXQiOjE2MDU2NTc2MDAsImlzcyI6IkNvbmZsdWVudCIsIm1vbml0b3JpbmciOnRydWUsIm5iNCI6MTYwNTc0ODMyMSwic3ViIjoiY29udHJvbC1jZW50ZXIifQ.WLPe7SVTyzTXqBdJftJXnpiMwqkNwilgGIBXs5N8CfrSmUz5CfY7GGXSMiV4UscNvckl5rxZBU0ZSWZ99bWyqe8_xfWRo0XRof7KCpSOyWorGODrU2G7Hl3c310BMh6ejtsuRvWN6vrjfjwdt5oZUtgtttBY6aBSHQIdz8YHHJNG1nmI3AU1NYNoDooByAavH4NDyTcJ3NC9pRa4QB7NxBcLpiJOlRH-csJhVI7iSdc6dydYJJYWEp6PNpXkT6nILvZec7yS4ELSnyMNGfl6_70TpXFlGx_xO2CwSO3eedRH1R9MT8MxDY-MTTlyKur4JQtJ4zk_SFCUmJqZ731zkQ
#inter.broker.protocol.version=2.6
# End of ERP configs
